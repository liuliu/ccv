<!doctype html>
<html><head><meta charset="utf-8">
<title>Getting Started</title>
<link rel="stylesheet" href="/stylesheets/styles.css">
<link rel="stylesheet" href="/stylesheets/coderay.css">
<script src="/javascripts/scale.fix.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
<meta http-equiv="X-UA-Compatible" content="chrome=1">
<!--[if lt IE 9]>
<script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->
</head><body><div class="wrapper">
<header><h1>ccv</h1>
<p>A Modern Computer Vision Library</p>
<p class="view"><a href="https://github.com/liuliu/ccv">View the Project on GitHub <small>liuliu/ccv</small></a></p>
<ul>
<li><a href="https://github.com/liuliu/ccv/zipball/unstable">Download <strong>ZIP File</strong></a></li>
<li><a href="https://github.com/liuliu/ccv/tarball/unstable">Download <strong>TAR Ball</strong></a></li>
<li><a href="https://github.com/liuliu/ccv">Fork On <strong>GitHub</strong></a></li>
</ul>
</header>
<section><h1>Getting Started</h1>
<h2 id="install">Install</h2>
<p>ccv is very lightweight. There is no concept of ‘install’. If you want to use ccv, statically linking to it is sufficient. To the extreme, it is recommended to drop ccv source code into your project and use it directly.</p>

<p>For old-schooler, run ‘make’ in /lib directory will generate the libccv.a archive. From there, you can statically link to it by -lccv. For example, you have ccv source compiled in ~/ccv/, and you want to compile ~/studies/sift.c with ccv.</p>

<pre><code>clang -L"~/ccv/lib" -I"~/ccv/lib" sift.c -lccv `cat ~/ccv/lib/.LN` -lm
</code></pre>

<p>That it. The only magic sauce is ~/ccv/lib/.LN, which gives you all the dependencies you have to link to when you compile ccv the first time. If your ccv compiled with no dependency, it is empty (and ccv works with zero dependency).</p>

<h2 id="read-a-photo">Read a Photo</h2>
<p>Let’s start with something small.</p>

<div><div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"><a href="#n1" name="n1">1</a></span><span style="color:#579">#include</span> <span style="color:#B44;font-weight:bold">&lt;ccv.h&gt;</span>
<span class="line-numbers"><a href="#n2" name="n2">2</a></span><span style="color:#0a5;font-weight:bold">int</span> main(<span style="color:#0a5;font-weight:bold">int</span> argc, <span style="color:#0a5;font-weight:bold">char</span>** argv)
<span class="line-numbers"><a href="#n3" name="n3">3</a></span>{
<span class="line-numbers"><a href="#n4" name="n4">4</a></span>    ccv_dense_matrix_t* image = <span style="color:#00D">0</span>;
<span class="line-numbers"><a href="#n5" name="n5">5</a></span>    ccv_read(argv[<span style="color:#00D">1</span>], &amp;image, CCV_IO_GRAY | CCV_IO_ANY_FILE);
<span class="line-numbers"><a href="#n6" name="n6">6</a></span>    ccv_write(image, argv[<span style="color:#00D">2</span>], <span style="color:#00D">0</span>, CCV_IO_PNG_FILE, <span style="color:#00D">0</span>);
<span class="line-numbers"><a href="#n7" name="n7">7</a></span>    <span style="color:#080;font-weight:bold">return</span> <span style="color:#00D">0</span>;
<span class="line-numbers"><a href="#n8" name="n8">8</a></span>}
</pre></div>
</div>
</div>

<p>If your ccv build has dependency on libjpeg or libpng, the code above is sufficient to load any JPEG or PNG file into memory and save a grayscale version to the disk.</p>

<h2 id="detect-a-face">Detect a Face</h2>
<p>Yes, knowing how to read a photo is sufficient to write an application that can do, for example, face detection.</p>

<div><div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"> <a href="#n1" name="n1">1</a></span><span style="color:#579">#include</span> <span style="color:#B44;font-weight:bold">&lt;ccv.h&gt;</span>
<span class="line-numbers"> <a href="#n2" name="n2">2</a></span><span style="color:#0a5;font-weight:bold">int</span> main(<span style="color:#0a5;font-weight:bold">int</span> argc, <span style="color:#0a5;font-weight:bold">char</span>** argv)
<span class="line-numbers"> <a href="#n3" name="n3">3</a></span>{
<span class="line-numbers"> <a href="#n4" name="n4">4</a></span>    ccv_dense_matrix_t* image = <span style="color:#00D">0</span>;
<span class="line-numbers"> <a href="#n5" name="n5">5</a></span>    ccv_read(argv[<span style="color:#00D">1</span>], &amp;image, CCV_IO_GRAY | CCV_IO_ANY_FILE);
<span class="line-numbers"> <a href="#n6" name="n6">6</a></span>    ccv_bbf_classifier_cascade_t* cascade = ccv_load_bbf_classifier_cascade(argv[<span style="color:#00D">2</span>]);
<span class="line-numbers"> <a href="#n7" name="n7">7</a></span>    ccv_bbf_params_t params = { .interval = <span style="color:#00D">8</span>, .min_neighbors = <span style="color:#00D">2</span>, .accurate = <span style="color:#00D">1</span>, .flags = <span style="color:#00D">0</span>, .size = ccv_size(<span style="color:#00D">24</span>, <span style="color:#00D">24</span>) };
<span class="line-numbers"> <a href="#n8" name="n8">8</a></span>    ccv_array_t* faces = ccv_bbf_detect_objects(image, &amp;cascade, <span style="color:#00D">1</span>, params);
<span class="line-numbers"> <a href="#n9" name="n9">9</a></span>    <span style="color:#0a5;font-weight:bold">int</span> i;
<span class="line-numbers"><strong><a href="#n10" name="n10">10</a></strong></span>    <span style="color:#080;font-weight:bold">for</span> (i = <span style="color:#00D">0</span>; i &lt; faces-&gt;rnum; i++)
<span class="line-numbers"><a href="#n11" name="n11">11</a></span>    {
<span class="line-numbers"><a href="#n12" name="n12">12</a></span>        ccv_comp_t* face = (ccv_comp_t*)ccv_array_get(faces, i);
<span class="line-numbers"><a href="#n13" name="n13">13</a></span>        printf(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">%d %d %d %d</span><span style="color:#b0b">\n</span><span style="color:#710">&quot;</span></span>, face-&gt;rect.x, face-&gt;rect.y, face-&gt;rect.width, face-&gt;rect.y);
<span class="line-numbers"><a href="#n14" name="n14">14</a></span>    }
<span class="line-numbers"><a href="#n15" name="n15">15</a></span>    ccv_array_free(faces);
<span class="line-numbers"><a href="#n16" name="n16">16</a></span>    ccv_bbf_classifier_cascade_free(cascade);
<span class="line-numbers"><a href="#n17" name="n17">17</a></span>    ccv_matrix_free(image);
<span class="line-numbers"><a href="#n18" name="n18">18</a></span>    <span style="color:#080;font-weight:bold">return</span> <span style="color:#00D">0</span>;
<span class="line-numbers"><a href="#n19" name="n19">19</a></span>}
</pre></div>
</div>
</div>

<p>That’s it.</p>

<h3><a href="/">&lsaquo;&nbsp;&nbsp;back&nbsp;</a></h3>
</section>
<footer>
<p>This project is maintained by <a href="https://liuliu.me/">liuliu</a></p>
<p><small>Theme originated from <a href="https://github.com/orderedlist">orderedlist</a></small></p>
</footer>
</div>
<!--[if !IE]><script>fixScale(document);</script><!--<![endif]-->
</body>
</html>
